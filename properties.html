<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Properties</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-50 flex flex-col min-h-screen">
    <div class="flex-grow p-4 lg:px-[10%]">

        <h1 class="text-2xl font-bold mb-6">H+H Immo - Properties</h1>
        <input id="searchInput" class="w-full p-3 border rounded-lg mb-6" placeholder="ðŸ” Search" />

        <div id="propertyList" class="space-y-4">

            <div id="prop-card-prop1" class="relative group">
                <button onclick="location.href='dynamic_detail.html?id=prop1'"
                    class="flex items-center gap-4 w-full bg-white shadow p-4 rounded-xl text-left hover:bg-gray-50 transition-colors pb-10">
                    <img src="istockphoto-1141065338-1024x1024.jpg" alt="Zurich Heights"
                        class="w-20 h-20 object-cover rounded-lg" />
                    <div>
                        <div class="font-semibold text-lg">Zurich Heights</div>
                        <div class="text-sm text-gray-500">Street 10, Zurich</div>
                    </div>
                </button>
                <div class="absolute bottom-3 right-3 flex space-x-1">
                    <button onclick="openEditPropertyModal('prop1', this)"
                        class="p-1.5 text-gray-300 hover:text-blue-500 transition-colors bg-white/80 rounded-lg hover:bg-blue-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
                            <path d="m15 5 4 4"></path>
                        </svg>
                    </button>
                    <button onclick="deleteProperty('prop1', this)"
                        class="p-1.5 text-gray-300 hover:text-red-500 transition-colors bg-white/80 rounded-lg hover:bg-red-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <div id="prop-card-prop2" class="relative group">
                <button onclick="location.href='dynamic_detail.html?id=prop2'"
                    class="flex items-center gap-4 w-full bg-white shadow p-4 rounded-xl text-left hover:bg-gray-50 transition-colors pb-10">
                    <img src="istockphoto-1218999098-1024x1024.jpg" alt="Swiss Lakeview"
                        class="w-20 h-20 object-cover rounded-lg" />
                    <div>
                        <div class="font-semibold text-lg">Swiss Lakeview</div>
                        <div class="text-sm text-gray-500">Main St 55, Bern</div>
                    </div>
                </button>
                <div class="absolute bottom-3 right-3 flex space-x-1">
                    <button onclick="openEditPropertyModal('prop2', this)"
                        class="p-1.5 text-gray-300 hover:text-blue-500 transition-colors bg-white/80 rounded-lg hover:bg-blue-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
                            <path d="m15 5 4 4"></path>
                        </svg>
                    </button>
                    <button onclick="deleteProperty('prop2', this)"
                        class="p-1.5 text-gray-300 hover:text-red-500 transition-colors bg-white/80 rounded-lg hover:bg-red-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                </div>
            </div>

        </div>


        <!-- Add Property Button (Above footer) -->
        <div class="mt-8 mb-6 flex justify-center">
            <button onclick="openAddPropertyModal()"
                class="bg-black text-white px-5 py-2.5 rounded-full shadow-md flex items-center gap-2.5 hover:bg-gray-800 transition-all transform hover:scale-105 active:scale-95 group border border-gray-800">
                <div class="bg-blue-500/20 p-1 rounded-md group-hover:bg-blue-500/30 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="#60a5fa" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </div>
                <span class="font-medium text-xs tracking-wide">Add Property</span>
            </button>
        </div>

    </div>
    <!-- Add Property Modal -->
    <div id="addPropertyModal" class="hidden fixed inset-0 bg-black/50 overflow-y-auto p-4 z-50">
        <div class="flex min-h-full items-center justify-center">
            <div class="bg-white w-full max-w-lg p-6 rounded-2xl space-y-4 shadow-xl">
                <div class="flex justify-between items-center">
                    <h2 id="modal-title" class="text-xl font-bold">Add New Property</h2>
                    <button onclick="closeAddPropertyModal()" class="text-gray-500 hover:text-black">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="space-y-4">
                    <!-- Image Upload Suggestion -->
                    <div class="flex flex-col items-center gap-2 p-4 border-2 border-dashed rounded-xl cursor-pointer hover:bg-gray-50 bg-gray-50 transition-colors"
                        onclick="document.getElementById('propertyImageInput').click()">
                        <img id="imagePreview" src="istockphoto-1141065338-1024x1024.jpg"
                            class="w-full h-40 object-cover rounded-lg hidden" />
                        <div id="imagePlaceholder" class="flex flex-col items-center py-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                stroke-linejoin="round" class="text-gray-400">
                                <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
                                <circle cx="9" cy="9" r="2" />
                                <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
                            </svg>
                            <span class="text-sm text-gray-500 mt-2">Click to upload property image</span>
                        </div>
                        <input type="file" id="propertyImageInput" class="hidden" accept="image/*"
                            onchange="previewImage(this)">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="md:col-span-2">
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Property
                                name</label>
                            <input id="prop-name" type="text"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. Zurich Heights">
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Street
                                &
                                Number</label>
                            <input id="prop-street" type="text"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. Main St 10">
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">zip,
                                city</label>
                            <input id="prop-zipcity" type="text"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 8000 Zurich">
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">year
                                of construction</label>
                            <input id="prop-year" type="number"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 2005">
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Number
                                of
                                apartments</label>
                            <input id="prop-apartments" type="number"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 12">
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Number
                                of
                                parking spots</label>
                            <input id="prop-parking" type="number"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 8">
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Number
                                of
                                owners</label>
                            <input id="prop-owners" type="number"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 6">
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">insurance
                                sum</label>
                            <input id="prop-insurance" type="text"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 3'000'000">
                        </div>
                        <div>
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">actual
                                fund</label>
                            <input id="prop-fund" type="text"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 150'000">
                        </div>
                        <div class="md:col-span-2">
                            <label
                                class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">yearly
                                savings</label>
                            <input id="prop-savings" type="text"
                                class="w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-black outline-none"
                                placeholder="e.g. 25'000">
                        </div>
                    </div>
                </div>

                <div class="flex gap-4 pt-4">
                    <button onclick="saveNewProperty()"
                        class="flex-1 bg-slate-800 text-white py-3 rounded-xl font-semibold hover:bg-black transition-colors">Save
                        Property</button>
                    <button onclick="closeAddPropertyModal()"
                        class="flex-1 border-2 border-slate-200 py-3 rounded-xl font-semibold hover:bg-gray-50 transition-colors">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmationModal" class="hidden fixed inset-0 bg-black/50 overflow-y-auto p-4 z-[60]">
        <div class="flex min-h-full items-center justify-center">
            <div class="bg-white w-full max-w-sm p-6 rounded-2xl space-y-6 shadow-xl text-center">
                <div class="mx-auto w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 6h18"></path>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                        <line x1="10" y1="11" x2="10" y2="17"></line>
                        <line x1="14" y1="11" x2="14" y2="17"></line>
                    </svg>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-gray-900">Delete Property</h3>
                    <p class="text-gray-500 mt-2">Are you sure you want to delete this property? This action cannot
                        be
                        undone.</p>
                </div>
                <div class="flex gap-4">
                    <button onclick="confirmDelete()"
                        class="flex-1 bg-red-600 text-white py-3 rounded-xl font-semibold hover:bg-red-700 transition-colors">Delete</button>
                    <button onclick="closeDeleteModal()"
                        class="flex-1 border-2 border-gray-100 py-3 rounded-xl font-semibold hover:bg-gray-50 transition-colors">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'immo_properties';
        let propertyToDeleteId = null;
        let propertyToDeleteElement = null;
        let editingPropertyId = null;

        // Load properties on startup
        window.addEventListener('DOMContentLoaded', () => {
            loadProperties();
        });

        function loadProperties() {
            const propertyList = document.getElementById('propertyList');
            const stored = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

            // Seed hardcoded ones if missing
            const hardcoded = [
                {
                    id: 'prop1',
                    name: 'Zurich Heights',
                    street: 'Street 10',
                    zipcity: 'Zurich',
                    image: 'istockphoto-1141065338-1024x1024.jpg',
                    year: '2005',
                    apartments: '12',
                    parking: '8',
                    owners: '6',
                    insurance: "3'000'000",
                    fund: "150'000",
                    savings: "25'000"
                },
                {
                    id: 'prop2',
                    name: 'Swiss Lakeview',
                    street: 'Main St 55',
                    zipcity: 'Bern',
                    image: 'istockphoto-1218999098-1024x1024.jpg',
                    year: '2010',
                    apartments: '8',
                    parking: '6',
                    owners: '4',
                    insurance: "2'500'000",
                    fund: "120'000",
                    savings: "15'000"
                }
            ];

            let modified = false;
            hardcoded.forEach(h => {
                if (!stored.find(p => p.id === h.id)) {
                    stored.push(h);
                    modified = true;
                }
            });

            if (modified) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(stored));
            }

            stored.forEach(prop => {
                // Check if card already exists (hardcoded in HTML)
                if (!document.getElementById(`prop-card-${prop.id}`)) {
                    renderProperty(prop, false);
                }
            });
        }

        function renderProperty(prop, isPrepend = false) {
            const propertyList = document.getElementById('propertyList');
            const container = document.createElement('div');
            container.className = "relative group";
            container.id = `prop-card-${prop.id}`;

            container.innerHTML = `
                <button onclick="location.href='dynamic_detail.html?id=${prop.id}'"
                    class="flex items-center gap-4 w-full bg-white shadow p-4 rounded-xl text-left hover:bg-gray-50 transition-colors pb-10">
                    <img src="${prop.image || 'istockphoto-1141065338-1024x1024.jpg'}" alt="${prop.name}" class="w-20 h-20 object-cover rounded-lg" />
                    <div>
                        <div class="font-semibold text-lg">${prop.name}</div>
                        <div class="text-sm text-gray-500">${prop.street}, ${prop.zipcity}</div>
                    </div>
                </button>
                <div class="absolute bottom-3 right-3 flex space-x-1">
                    <button onclick="openEditPropertyModal('${prop.id}', this)"
                        class="p-1.5 text-gray-300 hover:text-blue-500 transition-colors bg-white/80 rounded-lg hover:bg-blue-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
                            <path d="m15 5 4 4"></path>
                        </svg>
                    </button>
                    <button onclick="deleteProperty('${prop.id}', this)"
                        class="p-1.5 text-gray-300 hover:text-red-500 transition-colors bg-white/80 rounded-lg hover:bg-red-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                </div>
            `;

            container.querySelector('button').onclick = function () {
                location.href = `dynamic_detail.html?id=${prop.id}`;
            };

            if (isPrepend) {
                propertyList.insertBefore(container, propertyList.firstChild);
            } else {
                propertyList.appendChild(container);
            }
        }

        function deleteProperty(id, btn) {
            if (window.event) window.event.stopPropagation();
            propertyToDeleteId = id;
            propertyToDeleteElement = btn.closest('.relative');
            document.getElementById('deleteConfirmationModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeDeleteModal() {
            document.getElementById('deleteConfirmationModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            propertyToDeleteId = null;
            propertyToDeleteElement = null;
        }

        function confirmDelete() {
            if (propertyToDeleteElement) {
                const id = propertyToDeleteId;
                if (id) {
                    const stored = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                    const filtered = stored.filter(p => p.id !== id);
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));

                    // Cleanup expenses
                    localStorage.removeItem('immo_expenses_' + id);
                }
                propertyToDeleteElement.remove();
            }
            closeDeleteModal();
        }

        document.getElementById('searchInput').addEventListener('input', function (e) {
            const term = e.target.value.toLowerCase();
            const list = document.getElementById('propertyList');
            const items = list.querySelectorAll('.relative');

            items.forEach(item => {
                const text = item.innerText.toLowerCase();
                if (text.includes(term)) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
        });

        function openAddPropertyModal() {
            editingPropertyId = null;
            document.getElementById('modal-title').innerText = "Add New Property";
            document.querySelectorAll('#addPropertyModal input').forEach(input => input.value = '');
            document.getElementById('imagePreview').src = '';
            document.getElementById('imagePreview').classList.add('hidden');
            document.getElementById('imagePlaceholder').classList.remove('hidden');
            document.getElementById('addPropertyModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function openEditPropertyModal(id, btn) {
            if (window.event) window.event.stopPropagation();
            editingPropertyId = id;
            document.getElementById('modal-title').innerText = "Edit Property";

            let prop;
            if (id === 'null' || id === null) {
                const card = btn.closest('.relative');
                const title = card.querySelector('.font-semibold').innerText;
                const subtitle = card.querySelector('.text-gray-500').innerText;
                const parts = subtitle.split(', ');
                const street = parts[0] || '';
                const zipcity = parts[1] || '';
                const image = card.querySelector('img').src;

                prop = {
                    name: title,
                    street: street,
                    zipcity: zipcity,
                    image: image,
                    year: title === "Zurich Heights" ? "2005" : "2010",
                    apartments: title === "Zurich Heights" ? "12" : "8",
                    parking: "8",
                    owners: title === "Zurich Heights" ? "6" : "4",
                    insurance: title === "Zurich Heights" ? "3'000'000" : "2'500'000",
                    fund: title === "Zurich Heights" ? "150'000" : "120'000",
                    savings: "25'000"
                };
            } else {
                const stored = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                prop = stored.find(p => p.id === id);
            }

            if (prop) {
                document.getElementById('prop-name').value = prop.name;
                document.getElementById('prop-street').value = prop.street;
                document.getElementById('prop-zipcity').value = prop.zipcity;
                document.getElementById('prop-year').value = prop.year;
                document.getElementById('prop-apartments').value = prop.apartments;
                document.getElementById('prop-parking').value = prop.parking;
                document.getElementById('prop-owners').value = prop.owners;
                document.getElementById('prop-insurance').value = prop.insurance;
                document.getElementById('prop-fund').value = prop.fund;
                document.getElementById('prop-savings').value = prop.savings;

                const preview = document.getElementById('imagePreview');
                const placeholder = document.getElementById('imagePlaceholder');
                preview.src = prop.image;
                preview.classList.remove('hidden');
                placeholder.classList.add('hidden');
            }

            document.getElementById('addPropertyModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeAddPropertyModal() {
            document.getElementById('addPropertyModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function previewImage(input) {
            const preview = document.getElementById('imagePreview');
            const placeholder = document.getElementById('imagePlaceholder');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    preview.src = e.target.result;
                    preview.classList.remove('hidden');
                    placeholder.classList.add('hidden');
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function saveNewProperty() {
            const name = document.getElementById('prop-name').value;
            const street = document.getElementById('prop-street').value;
            const zipcity = document.getElementById('prop-zipcity').value;
            const year = document.getElementById('prop-year').value;
            const apartments = document.getElementById('prop-apartments').value;
            const parking = document.getElementById('prop-parking').value;
            const owners = document.getElementById('prop-owners').value;
            const insurance = document.getElementById('prop-insurance').value;
            const fund = document.getElementById('prop-fund').value;
            const savings = document.getElementById('prop-savings').value;

            const imageSrc = document.getElementById('imagePreview').src;
            const isImageHidden = document.getElementById('imagePreview').classList.contains('hidden');

            if (!name || !street || !zipcity) {
                alert("Please fill in at least Property Name, Street, and City.");
                return;
            }

            const stored = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

            if (editingPropertyId && editingPropertyId !== 'null') {
                const idx = stored.findIndex(p => p.id === editingPropertyId);
                const updatedProp = {
                    id: editingPropertyId,
                    name, street, zipcity, year, apartments, parking, owners, insurance, fund, savings,
                    image: isImageHidden ? 'istockphoto-1141065338-1024x1024.jpg' : imageSrc
                };

                if (idx !== -1) {
                    stored[idx] = updatedProp;
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(stored));
                }

                const card = document.getElementById(`prop-card-${editingPropertyId}`);
                if (card) {
                    card.querySelector('.font-semibold').innerText = name;
                    card.querySelector('.text-gray-500').innerText = `${street}, ${zipcity}`;
                    card.querySelector('img').src = updatedProp.image;
                }
            } else if (editingPropertyId === 'null') {
                // For hardcoded demo purpose, we'll just update the UI
                const cards = document.querySelectorAll('.relative');
                const card = Array.from(cards).find(c => c.querySelector('.font-semibold').innerText === name || c.querySelector('.font-semibold').innerText === document.getElementById('prop-name').defaultValue);
                if (card) {
                    card.querySelector('.font-semibold').innerText = name;
                    card.querySelector('.text-gray-500').innerText = `${street}, ${zipcity}`;
                    if (!isImageHidden) card.querySelector('img').src = imageSrc;
                }
            } else {
                const newProperty = {
                    id: Date.now().toString(),
                    name, street, zipcity, year, apartments, parking, owners, insurance, fund, savings,
                    image: isImageHidden ? 'istockphoto-1141065338-1024x1024.jpg' : imageSrc
                };
                stored.push(newProperty);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(stored));
                renderProperty(newProperty, false);
            }

            closeAddPropertyModal();
        }
    </script>
    </div>
    <footer class="mt-auto py-8 text-center text-gray-500 text-sm border-t border-gray-100 bg-white">
        <p>&copy; 2026 ImmoManager. All rights reserved.</p>
        <div class="mt-2 space-x-4 text-gray-400">
            <a href="access_management.html" class="hover:text-black transition-colors font-medium">Access
                Management</a>
            <span>&bull;</span>
            <a href="#" class="hover:text-black transition-colors">Support</a>
        </div>
    </footer>
</body>

</html>